apiVersion: v1
kind: {{ immediate | ternary('Job', 'CronJob') }}
metadata:
  name: pihole-sync
  namespace: {{ pihole_namespace }}
spec:
{% if immediate %}
  template:
    {{ job_template }}
{% else %}
  schedule: "*/5 * * * *"
  jobTemplate:
    spec:
      template:
        {{ job_template }}
{% endif %}
        